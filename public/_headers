# ============================================================
# Cache Rules for Cloudflare Pages - ToolsApp Lab
# Mission: Prevent black screen + Max speed for US developers
# ============================================================

# ------------------------------------------------------------
# HTML Entry - NO CACHE (prevents black screen core issue)
# ------------------------------------------------------------
/index.html
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0
  X-Content-Type-Options: nosniff

# All HTML files (safety net)
/*.html
  Cache-Control: no-cache, no-store, must-revalidate
  Pragma: no-cache
  Expires: 0

# ------------------------------------------------------------
# Static Assets - LONG CACHE (speed optimization)
# ------------------------------------------------------------
# JS/CSS bundles in /assets/
/assets/*
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# Root level JS/CSS
/*.js
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff
/*.css
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# ------------------------------------------------------------
# Images & Fonts - MEDIUM CACHE
# ------------------------------------------------------------
/*.png
  Cache-Control: public, max-age=31536000, immutable
/*.jpg
  Cache-Control: public, max-age=31536000, immutable
/*.jpeg
  Cache-Control: public, max-age=31536000, immutable
/*.svg
  Cache-Control: public, max-age=31536000, immutable
/*.ico
  Cache-Control: public, max-age=604800, immutable
/*.woff
  Cache-Control: public, max-age=31536000, immutable
/*.woff2
  Cache-Control: public, max-age=31536000, immutable
/*.ttf
  Cache-Control: public, max-age=31536000, immutable

# ------------------------------------------------------------
# PWA Resources - MEDIUM CACHE (7 days)
# ------------------------------------------------------------
/manifest.webmanifest
  Cache-Control: public, max-age=604800
  Content-Type: application/manifest+json

/sw.js
  Cache-Control: public, max-age=0, must-revalidate
  X-Content-Type-Options: nosniff

/apple-touch-icon.png
  Cache-Control: public, max-age=604800, immutable

/android-chrome-192x192.png
  Cache-Control: public, max-age=604800, immutable

/android-chrome-512x512.png
  Cache-Control: public, max-age=604800, immutable

/favicon.ico
  Cache-Control: public, max-age=604800, immutable

# ------------------------------------------------------------
# Security Headers (applies to all routes)
# ------------------------------------------------------------
/*
  X-Content-Type-Options: nosniff
  X-Frame-Options: DENY
  X-XSS-Protection: 1; mode=block
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: geolocation=(), microphone=(), camera=(), interest-cohort=()

# ------------------------------------------------------------
# SEO & AI Crawlers
# ------------------------------------------------------------
/*
  X-Robots-Tag: all
  # Allow AI crawlers (ChatGPT, Perplexity, Claude, etc.)
